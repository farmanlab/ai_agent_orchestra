---
name: managing-screen-specs
description: Initializes and updates screen specification documents. Use as a foundation skill for all screen documentation workflows.
allowed-tools: [Read, Write, Glob]
---

# Screen Spec Management Skill

画面仕様書の初期化とセクション更新を管理するヘルパースキルです。

## 概要

各スキル（converting-figma-to-html, documenting-ui-states等）は、このスキルの手順に従って画面仕様書を更新します。

## ファイル構造

```
.agents/
├── templates/
│   └── screen-spec.md          # 画面仕様書テンプレート
└── tmp/
    └── {screen-id}/
        ├── spec.md             # 画面仕様書（メインドキュメント）
        ├── index.html          # 参照用HTML
        └── assets/             # 画像等のアセット
```

## ワークフロー

### 1. 仕様書の初期化

新しい画面の仕様書を作成する場合：

```bash
# テンプレートをコピー
cp .agents/templates/screen-spec.md .agents/tmp/{screen-id}/spec.md

# 基本情報を置換
- {{SCREEN_NAME}} → 画面名
- {{SCREEN_ID}} → 画面識別子
- {{FIGMA_URL}} → Figma URL
- {{ROOT_NODE_ID}} → ノードID
- {{DATE}} → 作成日
- {{SCREEN_PURPOSE}} → 画面の目的
```

### 2. セクションの更新

各スキルは担当セクションのみを更新します。

#### 更新手順

1. **セクション位置を特定**

```markdown
<!-- 
================================================================================
SECTION: {セクション名}
Generated by: {スキル名}
================================================================================
-->

## {セクション名}
```

2. **ステータスを更新**

```markdown
> **ステータス**: 完了 ✓  
> **生成スキル**: {スキル名}  
> **更新日**: {DATE}
```

3. **プレースホルダーを内容に置換**

```markdown
{{SECTION_CONTENT}} → 実際の内容
```

4. **完了チェックリストを更新**

```markdown
- [x] {該当セクション} ({スキル名})
```

5. **変更履歴に追記**

```markdown
| {DATE} | {セクション名} | {スキル名}により生成 |
```

### 3. セクション別の責任範囲

| セクション | 担当スキル | プレースホルダー |
|-----------|-----------|-----------------|
| 構造・スタイル | converting-figma-to-html | `{{STRUCTURE_CONTENT}}` |
| UI状態 | documenting-ui-states | `{{UI_STATES_CONTENT}}` |
| インタラクション | extracting-interactions | `{{INTERACTIONS_CONTENT}}` |
| フォーム仕様 | defining-form-specs | `{{FORM_SPECS_CONTENT}}` |
| APIマッピング | mapping-html-to-api | `{{API_MAPPING_CONTENT}}` |
| アクセシビリティ | defining-accessibility-requirements | `{{ACCESSIBILITY_CONTENT}}` |
| デザイントークン | extracting-design-tokens | `{{DESIGN_TOKENS_CONTENT}}` |
| 画面フロー | documenting-screen-flows | `{{SCREEN_FLOWS_CONTENT}}` |

## セクション更新のルール

### 必須

- 自分の担当セクションのみを更新する
- ステータスを「完了 ✓」に更新する
- 変更履歴に記録を追加する
- 完了チェックリストを更新する

### 禁止

- 他のセクションの内容を変更しない
- プレースホルダーを削除せずに残さない
- テンプレートのコメント（`<!-- -->`）を削除しない

## 初期化の例

### 入力

```
画面名: 講座一覧
画面ID: course-list
Figma URL: https://figma.com/design/xxx/Project?node-id=1234-5678
目的: ユーザーが受講可能な講座を一覧表示する
```

### 出力（spec.md 冒頭部分）

```markdown
# 画面仕様書: 講座一覧

> **ステータス**: 作成中  
> **最終更新**: 2024-01-15  
> **Figma URL**: https://figma.com/design/xxx/Project?node-id=1234-5678

---

## 概要

| 項目 | 値 |
|------|-----|
| 画面名 | 講座一覧 |
| 画面ID | course-list |
| Figma Node | `1234:5678` |
| 作成日 | 2024-01-15 |

### 画面の目的

ユーザーが受講可能な講座を一覧表示する
```

## セクション更新の例

### documenting-ui-states による更新

**Before:**

```markdown
## UI状態

> **ステータス**: 未着手  
> **生成スキル**: documenting-ui-states

{{UI_STATES_CONTENT}}
```

**After:**

```markdown
## UI状態

> **ステータス**: 完了 ✓  
> **生成スキル**: documenting-ui-states  
> **更新日**: 2024-01-15

### 状態一覧

| 状態 | 条件 | Figma Node |
|------|------|------------|
| default | データあり | `1234:5679` |
| empty | データ0件 | `1234:5680` |
| loading | API通信中 | `1234:5681` |
| error | API失敗 | `1234:5682` |

### 状態遷移図

\```mermaid
stateDiagram-v2
    [*] --> loading
    loading --> default: データあり
    loading --> empty: データなし
    loading --> error: API失敗
\```

[詳細な状態説明...]
```

## 仕様書の完了判定

全ての必須セクションが完了したら、ヘッダーのステータスを更新：

```markdown
> **ステータス**: 完了 ✓
```

### 必須セクション

- 構造・スタイル
- UI状態
- インタラクション
- APIマッピング
- アクセシビリティ

### 条件付きセクション

- フォーム仕様: 入力フォームがある場合
- 画面フロー: 複数画面の機能の場合
- デザイントークン: デザインシステム整備時

## 参照

- **[screen-spec.md](../templates/screen-spec.md)**: テンプレートファイル
