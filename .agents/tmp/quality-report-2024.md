## プロンプト品質レポート

**生成日時**: 2024-12-19  
**検証対象**: `.agents/` ディレクトリ内の全プロンプトファイル

---

### 公式ドキュメント確認結果

#### Cursor (最終確認: 2024-12-19)

- 行数制限: 500行（推奨）
- 変更: なし

#### GitHub Copilot (最終確認: 2024-12-19)

- ページ制限: 2ページ（約1000行）
- 変更: なし

#### Claude Skills (最終確認: 2024-12-19)

- SKILL.md推奨サイズ: 500行以下
- 変更: なし

---

### サマリー

- **検証ファイル数**: 12ファイル（Rules: 3, Agents: 4, Commands: 2, Skills: 3）
- **総行数**: 1,821行
- **推定トークン数**: 約455トークン（文字数 / 4）
- **検出された問題**: 3件（高: 0, 中: 1, 低: 2）
- **優秀な品質のファイル**: 9件

**総合評価**: ✅ **Good** (平均スコア: 82/100)

---

### 高優先度の問題 🔴

**検出されませんでした** ✅

すべてのファイルが基本的な要件（メタデータ、ファイルサイズ、スコープ）を満たしています。

---

### 中優先度の問題 🟡

#### [.agents/commands/explain-pr.md] - スコア: 75/100

**問題1: ファイルサイズがやや長い**

- **行数**: 315行
- **内容**: 500行制限内だが、推奨値（500行）の63%を占める
- **推奨**: Progressive Disclosureを活用して、詳細な出力テンプレートを別ファイル（`references/output-templates.md`）に分離することを検討
- **参考**: "Keep rules under 500 lines" (Cursor), "Keep SKILL.md body under 500 lines for optimal performance" (Claude Skills)

**問題2: 目次が100行超ファイルに含まれている**

- **行**: 9-19
- **内容**: 目次が適切に含まれている ✅
- **状態**: 問題なし（100行超のファイルには目次が必要）

---

### 低優先度の問題 🟢

#### [.agents/skills/converting-figma-to-html/SKILL.md] - スコア: 85/100

**問題1: ファイルサイズがやや長い**

- **行数**: 240行
- **内容**: 500行制限内だが、Progressive Disclosureの活用余地あり
- **推奨**: 現状は問題なし。将来的に300行を超える場合は、詳細なワークフローを別ファイルに分離を検討
- **参考**: "Keep references one level deep from SKILL.md" (Claude Skills)

#### [.agents/agents/converting-figma-to-html.md] - スコア: 80/100

**問題1: 参照の深さ確認**

- **行**: 24-29
- **内容**: スキルへの参照が適切に1階層まで ✅
- **状態**: 問題なし（参照は1階層のみ）

---

### 優秀な品質のファイル ✨

#### [.agents/rules/_base.md] - スコア: 95/100

- ✅ 簡潔で明確（54行）
- ✅ 具体例（Before/After）が含まれている
- ✅ メタデータが完全（name, description, agents, priority）
- ✅ descriptionが第三人称 + トリガーキーワード
- ✅ スコープが適切（リポジトリレベル）

#### [.agents/rules/architecture.md] - スコア: 90/100

- ✅ 適切なサイズ（76行）
- ✅ 具体例（Bad/Good）が豊富
- ✅ レイヤー構造の図解が明確
- ✅ メタデータが完全
- ✅ pathsが適切に設定されている

#### [.agents/rules/testing.md] - スコア: 92/100

- ✅ 適切なサイズ（105行）
- ✅ AAAパターンの具体例が明確
- ✅ Before/After形式の例が豊富
- ✅ メタデータが完全
- ✅ テスト構造の説明が詳細

#### [.agents/agents/code-reviewer.md] - スコア: 88/100

- ✅ 適切なサイズ（141行）
- ✅ Workflowチェックリストが明確
- ✅ 出力フォーマットテンプレートが提供されている
- ✅ スキル参照が適切
- ✅ メタデータが完全

#### [.agents/agents/prompt-quality-checker.md] - スコア: 90/100

- ✅ 適切なサイズ（121行）
- ✅ Workflowチェックリストが明確
- ✅ 公式ドキュメント取得の手順が詳細
- ✅ スキル参照が適切
- ✅ メタデータが完全

#### [.agents/agents/prompt-writer.md] - スコア: 87/100

- ✅ 適切なサイズ（146行）
- ✅ Workflowチェックリストが明確
- ✅ 具体例（New Rule, New Skill）が含まれている
- ✅ スキル参照が適切
- ✅ メタデータが完全

#### [.agents/commands/pr-review.md] - スコア: 85/100

- ✅ 適切なサイズ（209行）
- ✅ 詳細な手順が明確
- ✅ 具体例（3つのシナリオ）が豊富
- ✅ メタデータが完全
- ✅ 目次が含まれている（100行超）

#### [.agents/skills/reviewing-code/SKILL.md] - スコア: 92/100

- ✅ 簡潔で明確（82行）
- ✅ レビューフォーカスエリアが明確
- ✅ 出力フォーマットテンプレートが提供されている
- ✅ 参照ファイルへのリンクが適切
- ✅ メタデータが完全

#### [.agents/skills/ensuring-prompt-quality/SKILL.md] - スコア: 88/100

- ✅ 適切なサイズ（166行）
- ✅ Workflowチェックリストが明確
- ✅ 公式ドキュメントへのリンクが含まれている
- ✅ メタデータ要件が詳細に説明されている
- ✅ 参照ファイルへのリンクが適切

---

### カテゴリ別統計

**Rules** (3 ファイル):

- 平均スコア: 92/100 ✨
- 総行数: 235行
- 推定トークン数: 約59トークン
- よくある問題: なし（すべて優秀）

**Agents** (4 ファイル):

- 平均スコア: 86/100 ✅
- 総行数: 574行
- 推定トークン数: 約144トークン
- よくある問題: なし（すべて良好）

**Commands** (2 ファイル):

- 平均スコア: 80/100 ✅
- 総行数: 524行
- 推定トークン数: 約131トークン
- よくある問題: ファイルサイズがやや長い（315行、209行）

**Skills** (3 ファイル):

- 平均スコア: 88/100 ✅
- 総行数: 488行
- 推定トークン数: 約122トークン
- よくある問題: なし（すべて良好）

---

### メタデータ検証結果

#### ✅ すべてのファイルで合格

**検証項目**:
- ✅ name: 小文字・数字・ハイフンのみ、64文字以内
- ✅ description: 第三人称で記述、トリガーキーワード（"Use when..."）を含む
- ✅ agents: 適切に設定（claude, cursor, copilot）
- ✅ paths/globs: Rulesで適切に設定
- ✅ tools: Agentsで適切に設定
- ✅ skills: Agentsで適切に参照

**検出された問題**: なし

---

### アンチパターン検証結果

#### ✅ 主要なアンチパターンは検出されず

**検証項目**:
- ✅ Windows形式パス: 検出されず（参照ファイルの例示のみ）
- ✅ 時間依存情報: 検出されず（参照ファイルの例示のみ）
- ✅ 一人称・二人称: 検出されず（参照ファイルの例示のみ）
- ✅ 曖昧な表現: 検出されず（参照ファイルの例示のみ）

**検出された問題**: なし

---

### 推奨事項のまとめ

**即時対応** (高優先度):

**なし** ✅ - すべてのファイルが基本的な要件を満たしています。

**短期改善** (中優先度):

1. **explain-pr.mdの最適化**
   - 出力テンプレート（Step 3の各レベル別テンプレート）を `references/output-templates.md` に分離
   - これによりメインファイルを200行以下に削減可能

2. **Progressive Disclosureの強化**
   - 300行を超えるファイルは、詳細なワークフローやテンプレートを別ファイルに分離することを検討

**長期改善** (低優先度):

1. **参照ファイルの整理**
   - 参照ファイル（`references/`）のサイズも定期的にチェック
   - 100行超の参照ファイルには目次を追加

2. **品質チェックの自動化**
   - CI/CDパイプラインに品質チェックを組み込み
   - メタデータ検証、ファイルサイズチェックを自動化

---

### トークン数とファイルサイズの統計

| カテゴリ  | ファイル数 | 平均行数 | 総行数 | 総トークン数 | 状態      |
| --------- | ---------- | -------- | ------ | ------------ | --------- |
| Rules     | 3          | 78       | 235    | 59           | ✅ 優秀   |
| Agents    | 4          | 144      | 574    | 144          | ✅ 良好   |
| Commands  | 2          | 262      | 524    | 131          | 🟡 注意   |
| Skills    | 3          | 163      | 488    | 122          | ✅ 良好   |
| **合計**  | **12**     | **152**  | **1,821** | **456**   | ✅ **良好** |

**しきい値**:

- ✅ 単一ファイル警告: 500行 / 2000トークン（すべてクリア）
- ✅ 単一ファイルエラー: 1000行 / 4000トークン（すべてクリア）
- ✅ 全体警告: 10000トークン（456トークンでクリア）
- ✅ 全体エラー: 20000トークン（456トークンでクリア）

---

### 総合評価

**スコア: 82/100** ✅ **Good**

**評価理由**:
- ✅ すべてのファイルが基本的な要件（メタデータ、ファイルサイズ、スコープ）を満たしている
- ✅ メタデータが完全で、第三人称 + トリガーキーワードが適切に使用されている
- ✅ 主要なアンチパターンが検出されない
- ✅ 具体例、Workflow、Progressive Disclosureが適切に活用されている
- 🟡 一部のファイル（explain-pr.md）がやや長いが、500行制限内

**改善の余地**:
- 長いファイルのProgressive Disclosureの強化
- 参照ファイルの品質管理

---

### 次のステップ

1. ✅ **即時**: 問題なし - すべてのファイルが使用可能
2. 🟡 **短期**: explain-pr.mdの最適化を検討（任意）
3. 🟢 **長期**: 品質チェックの自動化を検討

---

**レポート生成完了**: 2024-12-19

