# アクセシビリティセクション テンプレート

spec.md の「アクセシビリティ」セクションに挿入する内容のテンプレートです。

---

## セクション全体

```markdown
## アクセシビリティ

> **ステータス**: 完了 ✓  
> **生成スキル**: defining-accessibility-requirements  
> **更新日**: {{DATE}}  
> **準拠レベル**: WCAG 2.1 AA

### セマンティクス

| 要素 | 推奨タグ | role | aria属性 | 備考 |
|------|---------|------|----------|------|
| {{ELEMENT_1}} | {{TAG_1}} | {{ROLE_1}} | {{ARIA_1}} | {{NOTES_1}} |
| {{ELEMENT_2}} | {{TAG_2}} | {{ROLE_2}} | {{ARIA_2}} | {{NOTES_2}} |

### 見出し階層

```
h1: {{H1_CONTENT}}
  h2: {{H2_CONTENT_1}}
    h3: {{H3_CONTENT_1}}
  h2: {{H2_CONTENT_2}}
```

### ARIA属性

| 要素 | 属性 | 値 | 説明 |
|------|------|-----|------|
| {{ARIA_ELEMENT_1}} | {{ARIA_ATTR_1}} | {{ARIA_VALUE_1}} | {{ARIA_DESC_1}} |
| {{ARIA_ELEMENT_2}} | {{ARIA_ATTR_2}} | {{ARIA_VALUE_2}} | {{ARIA_DESC_2}} |

### フォーカス管理

#### タブ順序

```
{{TAB_ORDER}}
```

#### フォーカス移動

| イベント | フォーカス移動先 |
|----------|----------------|
| {{FOCUS_EVENT_1}} | {{FOCUS_TARGET_1}} |
| {{FOCUS_EVENT_2}} | {{FOCUS_TARGET_2}} |

#### フォーカストラップ

{{FOCUS_TRAP_DESCRIPTION}}

### 色・コントラスト

| 要素 | 前景色 | 背景色 | コントラスト比 | 判定 |
|------|--------|--------|---------------|------|
| {{COLOR_ELEMENT_1}} | {{FG_1}} | {{BG_1}} | {{RATIO_1}} | {{RESULT_1}} |
| {{COLOR_ELEMENT_2}} | {{FG_2}} | {{BG_2}} | {{RATIO_2}} | {{RESULT_2}} |

#### 色に依存しない情報伝達

{{COLOR_INDEPENDENT_INFO}}

### スクリーンリーダー対応

#### 代替テキスト

| 要素 | alt / aria-label |
|------|-----------------|
| {{SR_ELEMENT_1}} | {{SR_TEXT_1}} |
| {{SR_ELEMENT_2}} | {{SR_TEXT_2}} |

#### 読み上げテキスト

| 要素 | 読み上げ内容 |
|------|-------------|
| {{ANNOUNCE_ELEMENT_1}} | {{ANNOUNCE_TEXT_1}} |
| {{ANNOUNCE_ELEMENT_2}} | {{ANNOUNCE_TEXT_2}} |

#### ライブリージョン

| 要素 | aria-live | 用途 |
|------|-----------|------|
| {{LIVE_ELEMENT_1}} | {{LIVE_VALUE_1}} | {{LIVE_PURPOSE_1}} |
| {{LIVE_ELEMENT_2}} | {{LIVE_VALUE_2}} | {{LIVE_PURPOSE_2}} |

### キーボード操作

| 操作 | キー | 動作 |
|------|------|------|
| {{KB_OP_1}} | {{KB_KEY_1}} | {{KB_ACTION_1}} |
| {{KB_OP_2}} | {{KB_KEY_2}} | {{KB_ACTION_2}} |

### スキップリンク

{{SKIP_LINKS}}

### チェックリスト

- [ ] 全ての画像に適切な代替テキスト
- [ ] 全てのフォーム要素にラベル
- [ ] キーボードのみで全機能にアクセス可能
- [ ] フォーカスインジケーターが視認可能
- [ ] 色だけに依存しない情報伝達
- [ ] コントラスト比がWCAG AA基準を満たす
- [ ] スクリーンリーダーで論理的な読み上げ順序
- [ ] 動的コンテンツの変更が通知される

### 特記事項

- {{A11Y_NOTE_1}}
- {{A11Y_NOTE_2}}
```

---

## 変数一覧

### 基本情報

| 変数 | 説明 |
|------|------|
| `{{DATE}}` | 更新日 |

### セマンティクス

| 変数 | 説明 |
|------|------|
| `{{ELEMENT_N}}` | 画面要素名 |
| `{{TAG_N}}` | 推奨HTMLタグ |
| `{{ROLE_N}}` | WAI-ARIA role |
| `{{ARIA_N}}` | aria属性 |
| `{{NOTES_N}}` | 備考 |

### 見出し

| 変数 | 説明 |
|------|------|
| `{{H1_CONTENT}}` | h1の内容 |
| `{{H2_CONTENT_N}}` | h2の内容 |
| `{{H3_CONTENT_N}}` | h3の内容 |

### ARIA属性

| 変数 | 説明 |
|------|------|
| `{{ARIA_ELEMENT_N}}` | 対象要素 |
| `{{ARIA_ATTR_N}}` | aria属性名 |
| `{{ARIA_VALUE_N}}` | 属性値 |
| `{{ARIA_DESC_N}}` | 説明 |

### フォーカス管理

| 変数 | 説明 |
|------|------|
| `{{TAB_ORDER}}` | タブ順序の説明 |
| `{{FOCUS_EVENT_N}}` | フォーカス移動イベント |
| `{{FOCUS_TARGET_N}}` | フォーカス移動先 |
| `{{FOCUS_TRAP_DESCRIPTION}}` | フォーカストラップの説明 |

### 色・コントラスト

| 変数 | 説明 |
|------|------|
| `{{COLOR_ELEMENT_N}}` | 対象要素 |
| `{{FG_N}}` | 前景色 |
| `{{BG_N}}` | 背景色 |
| `{{RATIO_N}}` | コントラスト比 |
| `{{RESULT_N}}` | 判定結果（✓ AA / ⚠️ 不足） |
| `{{COLOR_INDEPENDENT_INFO}}` | 色に依存しない情報伝達の説明 |

### スクリーンリーダー

| 変数 | 説明 |
|------|------|
| `{{SR_ELEMENT_N}}` | 対象要素 |
| `{{SR_TEXT_N}}` | 代替テキスト |
| `{{ANNOUNCE_ELEMENT_N}}` | 読み上げ対象要素 |
| `{{ANNOUNCE_TEXT_N}}` | 読み上げ内容 |
| `{{LIVE_ELEMENT_N}}` | ライブリージョン要素 |
| `{{LIVE_VALUE_N}}` | aria-live値 |
| `{{LIVE_PURPOSE_N}}` | 用途 |

### キーボード

| 変数 | 説明 |
|------|------|
| `{{KB_OP_N}}` | 操作名 |
| `{{KB_KEY_N}}` | キー |
| `{{KB_ACTION_N}}` | 動作 |
| `{{SKIP_LINKS}}` | スキップリンクの説明 |

---

## spec.md 更新時の追加変更

### 1. 完了チェックリスト

```markdown
- [x] アクセシビリティ (defining-accessibility-requirements)
```

### 2. 変更履歴

```markdown
| {{DATE}} | アクセシビリティ | defining-accessibility-requirementsにより生成 |
```

---

## 出力例

```markdown
## アクセシビリティ

> **ステータス**: 完了 ✓  
> **生成スキル**: defining-accessibility-requirements  
> **更新日**: 2024-01-15  
> **準拠レベル**: WCAG 2.1 AA

### セマンティクス

| 要素 | 推奨タグ | role | aria属性 | 備考 |
|------|---------|------|----------|------|
| ページヘッダー | `<header>` | banner | - | ページに1つ |
| メインナビ | `<nav>` | navigation | aria-label="メインナビゲーション" | - |
| 検索フォーム | `<form>` | search | aria-label="サイト内検索" | - |
| メインコンテンツ | `<main>` | main | - | ページに1つ |
| 講座リスト | `<ul>` | list | aria-label="講座一覧" | - |
| 講座カード | `<article>` | article | - | 見出し(h3)を含む |
| フッター | `<footer>` | contentinfo | - | - |

### 見出し階層

```
h1: 講座一覧
  h2: フィルター
  h2: 講座リスト
    h3: [各講座タイトル]
  h2: ページネーション
```

### ARIA属性

| 要素 | 属性 | 値 | 説明 |
|------|------|-----|------|
| 検索ボタン（アイコン） | aria-label | "検索" | 視覚的ラベルなし |
| フィルタードロップダウン | aria-expanded | "true/false" | 開閉状態 |
| フィルタードロップダウン | aria-haspopup | "listbox" | ポップアップ種類 |
| タブ（カテゴリ） | aria-selected | "true/false" | 選択状態 |
| 進捗バー | aria-valuenow | "0-100" | 現在値 |
| 進捗バー | aria-valuemin | "0" | 最小値 |
| 進捗バー | aria-valuemax | "100" | 最大値 |
| 進捗バー | aria-label | "受講進捗" | ラベル |

### フォーカス管理

#### タブ順序

```
1. スキップリンク（メインコンテンツへ）
2. ロゴ（ホームへのリンク）
3. メインナビゲーション項目（左→右）
4. 検索フィールド
5. 検索ボタン
6. カテゴリタブ（左→右）
7. フィルタードロップダウン
8. 講座カード（上→下、左→右）
9. ページネーション
10. フッターリンク
```

#### フォーカス移動

| イベント | フォーカス移動先 |
|----------|----------------|
| フィルターモーダル表示 | モーダル内の最初のチェックボックス |
| フィルターモーダル閉じる | フィルターボタン |
| 検索実行 | 検索結果の見出し（h2） |
| ページネーションクリック | 講座リストの見出し（h2） |

#### フォーカストラップ

- フィルターモーダル表示中はモーダル内でフォーカスをトラップ
- Tab: 最後の要素（適用ボタン）→ 最初の要素（閉じるボタン）
- Shift+Tab: 最初の要素 → 最後の要素
- Escape: モーダルを閉じてフィルターボタンにフォーカス

### 色・コントラスト

| 要素 | 前景色 | 背景色 | コントラスト比 | 判定 |
|------|--------|--------|---------------|------|
| 本文テキスト | #24243F | #FFFFFF | 14.5:1 | ✓ AA |
| 補足テキスト | #67717A | #FFFFFF | 5.2:1 | ✓ AA |
| ボタンテキスト | #FFFFFF | #0070E0 | 4.6:1 | ✓ AA |
| リンクテキスト | #0070E0 | #FFFFFF | 4.5:1 | ✓ AA |
| エラーテキスト | #D32F2F | #FFFFFF | 5.9:1 | ✓ AA |
| 非活性テキスト | #9E9E9E | #FFFFFF | 2.9:1 | ⚠️ 要確認 |

#### 色に依存しない情報伝達

- **新着バッジ**: 青色 + 「NEW」テキスト
- **人気バッジ**: オレンジ色 + 「人気」テキスト
- **残席わずか**: 赤色 + アイコン + 「残席わずか」テキスト
- **必須項目**: 赤色 + アスタリスク(*)
- **リンク**: 青色 + 下線（hover時）

### スクリーンリーダー対応

#### 代替テキスト

| 要素 | alt / aria-label |
|------|-----------------|
| 企業ロゴ | "〇〇株式会社 ホームへ" |
| 講座サムネイル | "{講座タイトル}のサムネイル画像" |
| 検索アイコン | aria-label="検索" |
| フィルターアイコン | aria-label="フィルター" |
| 装飾画像 | alt="" aria-hidden="true" |
| 評価星 | aria-hidden="true"（テキストで補足） |

#### 読み上げテキスト

| 要素 | 読み上げ内容 |
|------|-------------|
| 評価 ★★★★☆ | "評価 5段階中4" |
| 進捗 75% | "受講進捗 75パーセント" |
| 残席3 | "残席 3席" |
| 新着バッジ | "新着" |
| 価格 ¥1,980 | "1980円" |

#### ライブリージョン

| 要素 | aria-live | 用途 |
|------|-----------|------|
| 検索結果件数 | polite | "12件の講座が見つかりました" |
| フィルター適用通知 | polite | "フィルターを適用しました" |
| エラーメッセージ | assertive | フォームエラー時 |
| ローディング表示 | polite | "読み込み中" |

### キーボード操作

| 操作 | キー | 動作 |
|------|------|------|
| フォーカス移動 | Tab | 次のインタラクティブ要素へ |
| フォーカス移動（逆） | Shift + Tab | 前のインタラクティブ要素へ |
| ボタン/リンク実行 | Enter | クリックと同等 |
| ボタン実行 | Space | クリックと同等 |
| ドロップダウン開閉 | Enter / Space | 開閉トグル |
| ドロップダウン選択 | ↑ / ↓ | 項目間移動 |
| ドロップダウン確定 | Enter | 選択確定 |
| ドロップダウン閉じる | Escape | 閉じる |
| タブ切り替え | ← / → | 前後のタブへ |
| モーダル閉じる | Escape | モーダルを閉じる |

### スキップリンク

ページ先頭に以下のスキップリンクを配置（フォーカス時のみ表示）：

1. "メインコンテンツへスキップ" → #main-content
2. "検索へスキップ" → #search-form

### チェックリスト

- [x] 全ての画像に適切な代替テキスト
- [x] 全てのフォーム要素にラベル
- [x] キーボードのみで全機能にアクセス可能
- [x] フォーカスインジケーターが視認可能
- [x] 色だけに依存しない情報伝達
- [x] コントラスト比がWCAG AA基準を満たす
- [ ] 非活性テキストのコントラスト要確認
- [x] スクリーンリーダーで論理的な読み上げ順序
- [x] 動的コンテンツの変更が通知される

### 特記事項

- 非活性テキスト (#9E9E9E) のコントラスト比が2.9:1でAA基準(4.5:1)を下回る → 設計者に確認
- カルーセルがある場合は自動再生の停止ボタンを追加
- 動画コンテンツがある場合はキャプション/字幕を提供
```
