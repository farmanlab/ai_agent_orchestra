# フォーム仕様セクション テンプレート

spec.md の「フォーム仕様」セクションに挿入する内容のテンプレートです。

---

## セクション全体（フォームあり）

```markdown
## フォーム仕様

> **ステータス**: 完了 ✓  
> **生成スキル**: defining-form-specs  
> **更新日**: {{DATE}}

### フォーム概要

| 項目 | 値 |
|------|-----|
| フォーム名 | {{FORM_NAME}} |
| フィールド数 | {{FIELD_COUNT}} |
| 必須フィールド数 | {{REQUIRED_COUNT}} |

### フィールド一覧

| フィールド | 型 | 必須 | 最大文字数 | 備考 |
|-----------|-----|:----:|-----------|------|
| {{FIELD_LABEL_1}} | {{FIELD_TYPE_1}} | {{REQUIRED_1}} | {{MAX_LENGTH_1}} | {{FIELD_NOTES_1}} |
| {{FIELD_LABEL_2}} | {{FIELD_TYPE_2}} | {{REQUIRED_2}} | {{MAX_LENGTH_2}} | {{FIELD_NOTES_2}} |

### フィールド詳細

#### {{FIELD_LABEL_1}}

| 項目 | 値 |
|------|-----|
| フィールドID | {{FIELD_ID_1}} |
| 入力タイプ | {{FIELD_TYPE_1}} |
| 必須 | {{REQUIRED_1}} |
| プレースホルダー | {{PLACEHOLDER_1}} |
| バリデーション | {{VALIDATION_SUMMARY_1}} |
| エラーメッセージ | {{ERROR_MESSAGE_1}} |
| バリデーションタイミング | {{VALIDATION_TIMING_1}} |

#### {{FIELD_LABEL_2}}

| 項目 | 値 |
|------|-----|
| フィールドID | {{FIELD_ID_2}} |
| 入力タイプ | {{FIELD_TYPE_2}} |
| 必須 | {{REQUIRED_2}} |
| プレースホルダー | {{PLACEHOLDER_2}} |
| バリデーション | {{VALIDATION_SUMMARY_2}} |
| エラーメッセージ | {{ERROR_MESSAGE_2}} |
| バリデーションタイミング | {{VALIDATION_TIMING_2}} |

### バリデーションルール

| フィールド | ルール | 条件 | エラーメッセージ |
|-----------|--------|------|-----------------|
| {{FIELD_LABEL}} | {{RULE_TYPE}} | {{RULE_CONDITION}} | {{RULE_ERROR_MSG}} |

### バリデーションタイミング

| タイミング | 対象フィールド |
|-----------|---------------|
| onChange | {{ON_CHANGE_FIELDS}} |
| onBlur | {{ON_BLUR_FIELDS}} |
| onSubmit | 全フィールド |
| debounced ({{DEBOUNCE_MS}}ms) | {{DEBOUNCED_FIELDS}} |

### 送信動作

| 項目 | 値 |
|------|-----|
| 送信ボタン | {{SUBMIT_BUTTON_LABEL}} |
| 活性条件 | {{SUBMIT_ENABLED_CONDITION}} |
| 送信中 | {{SUBMIT_LOADING_STATE}} |
| 成功時 | {{SUBMIT_SUCCESS_ACTION}} |
| 失敗時 | {{SUBMIT_FAILURE_ACTION}} |
| 再送信 | {{SUBMIT_RETRY_POLICY}} |

### 特記事項

- {{SPECIAL_NOTE_1}}
- {{SPECIAL_NOTE_2}}
```

---

## セクション全体（フォームなし）

```markdown
## フォーム仕様

> **ステータス**: 該当なし  
> **生成スキル**: defining-form-specs  
> **更新日**: {{DATE}}

この画面には入力フォームがありません。
```

---

## 変数一覧

### 基本情報

| 変数 | 説明 |
|------|------|
| `{{DATE}}` | 更新日 |
| `{{FORM_NAME}}` | フォーム名 |
| `{{FIELD_COUNT}}` | フィールド数 |
| `{{REQUIRED_COUNT}}` | 必須フィールド数 |

### フィールド情報

| 変数 | 説明 |
|------|------|
| `{{FIELD_ID_N}}` | フィールド識別子 |
| `{{FIELD_LABEL_N}}` | フィールドラベル |
| `{{FIELD_TYPE_N}}` | 入力タイプ |
| `{{REQUIRED_N}}` | 必須（✓ or -） |
| `{{MAX_LENGTH_N}}` | 最大文字数 |
| `{{PLACEHOLDER_N}}` | プレースホルダー |
| `{{FIELD_NOTES_N}}` | 備考 |

### バリデーション

| 変数 | 説明 |
|------|------|
| `{{VALIDATION_SUMMARY_N}}` | バリデーション概要 |
| `{{ERROR_MESSAGE_N}}` | 主要エラーメッセージ |
| `{{VALIDATION_TIMING_N}}` | バリデーションタイミング |
| `{{RULE_TYPE}}` | ルール種別 |
| `{{RULE_CONDITION}}` | ルール条件 |
| `{{RULE_ERROR_MSG}}` | エラーメッセージ |

### タイミング

| 変数 | 説明 |
|------|------|
| `{{ON_CHANGE_FIELDS}}` | onChange対象 |
| `{{ON_BLUR_FIELDS}}` | onBlur対象 |
| `{{DEBOUNCE_MS}}` | デバウンス時間 |
| `{{DEBOUNCED_FIELDS}}` | debounced対象 |

### 送信動作

| 変数 | 説明 |
|------|------|
| `{{SUBMIT_BUTTON_LABEL}}` | 送信ボタンテキスト |
| `{{SUBMIT_ENABLED_CONDITION}}` | 活性条件 |
| `{{SUBMIT_LOADING_STATE}}` | 送信中の表示 |
| `{{SUBMIT_SUCCESS_ACTION}}` | 成功時の動作 |
| `{{SUBMIT_FAILURE_ACTION}}` | 失敗時の動作 |
| `{{SUBMIT_RETRY_POLICY}}` | 再送信ポリシー |

---

## spec.md 更新時の追加変更

### 1. 完了チェックリスト

```markdown
- [x] フォーム仕様 (defining-form-specs)
```

### 2. 変更履歴

```markdown
| {{DATE}} | フォーム仕様 | defining-form-specsにより生成 |
```

---

## 出力例

```markdown
## フォーム仕様

> **ステータス**: 完了 ✓  
> **生成スキル**: defining-form-specs  
> **更新日**: 2024-01-15

### フォーム概要

| 項目 | 値 |
|------|-----|
| フォーム名 | ユーザー登録フォーム |
| フィールド数 | 5 |
| 必須フィールド数 | 4 |

### フィールド一覧

| フィールド | 型 | 必須 | 最大文字数 | 備考 |
|-----------|-----|:----:|-----------|------|
| メールアドレス | email | ✓ | 254 | - |
| パスワード | password | ✓ | 128 | 8文字以上、英数字混在 |
| パスワード確認 | password | ✓ | 128 | パスワードと一致 |
| ニックネーム | text | - | 20 | - |
| 利用規約同意 | checkbox | ✓ | - | チェック必須 |

### フィールド詳細

#### メールアドレス

| 項目 | 値 |
|------|-----|
| フィールドID | email |
| 入力タイプ | email |
| 必須 | ✓ |
| プレースホルダー | example@email.com |
| バリデーション | RFC 5322準拠、最大254文字、重複不可 |
| エラーメッセージ | 有効なメールアドレスを入力してください |
| バリデーションタイミング | onBlur（形式）、debounced（重複） |

#### パスワード

| 項目 | 値 |
|------|-----|
| フィールドID | password |
| 入力タイプ | password |
| 必須 | ✓ |
| プレースホルダー | 8文字以上の英数字 |
| バリデーション | 8文字以上、英字と数字を含む |
| エラーメッセージ | パスワードは8文字以上で英数字を含めてください |
| バリデーションタイミング | onChange（強度）、onBlur（検証） |
| 追加機能 | パスワード表示トグル、強度インジケーター |

#### パスワード確認

| 項目 | 値 |
|------|-----|
| フィールドID | password_confirm |
| 入力タイプ | password |
| 必須 | ✓ |
| プレースホルダー | パスワードを再入力 |
| バリデーション | パスワードフィールドと一致 |
| エラーメッセージ | パスワードが一致しません |
| バリデーションタイミング | onBlur |

#### ニックネーム

| 項目 | 値 |
|------|-----|
| フィールドID | nickname |
| 入力タイプ | text |
| 必須 | - |
| プレースホルダー | ニックネームを入力 |
| バリデーション | 最大20文字 |
| エラーメッセージ | ニックネームは20文字以内で入力してください |
| バリデーションタイミング | onBlur |

#### 利用規約同意

| 項目 | 値 |
|------|-----|
| フィールドID | terms_agreed |
| 入力タイプ | checkbox |
| 必須 | ✓ |
| バリデーション | チェック必須 |
| エラーメッセージ | 利用規約に同意してください |
| バリデーションタイミング | onChange |
| 追加機能 | 利用規約リンク（別タブで開く） |

### バリデーションルール

| フィールド | ルール | 条件 | エラーメッセージ |
|-----------|--------|------|-----------------|
| メールアドレス | required | - | メールアドレスを入力してください |
| メールアドレス | format | email | 有効なメールアドレスを入力してください |
| メールアドレス | maxLength | 254 | メールアドレスは254文字以内で入力してください |
| メールアドレス | unique | API確認 | このメールアドレスは既に登録されています |
| パスワード | required | - | パスワードを入力してください |
| パスワード | minLength | 8 | パスワードは8文字以上で入力してください |
| パスワード | pattern | /(?=.*[A-Za-z])(?=.*\d)/ | パスワードは英数字を含めてください |
| パスワード確認 | required | - | パスワード確認を入力してください |
| パスワード確認 | match | password | パスワードが一致しません |
| ニックネーム | maxLength | 20 | ニックネームは20文字以内で入力してください |
| 利用規約同意 | required | checked | 利用規約に同意してください |

### バリデーションタイミング

| タイミング | 対象フィールド |
|-----------|---------------|
| onChange | パスワード強度、利用規約同意 |
| onBlur | メールアドレス、パスワード、パスワード確認、ニックネーム |
| onSubmit | 全フィールド |
| debounced (500ms) | メールアドレス（重複チェック） |

### 送信動作

| 項目 | 値 |
|------|-----|
| 送信ボタン | 登録する |
| 活性条件 | 必須フィールド入力済み & バリデーションエラーなし |
| 送信中 | ボタン非活性 + スピナー表示 + テキスト「登録中...」 |
| 成功時 | 確認メール送信完了画面へ遷移 |
| 失敗時 | エラーメッセージをトーストで表示、入力内容維持 |
| 再送信 | エラー解消後に可能 |

### 特記事項

- メールアドレスの重複チェックはAPI経由（/api/check-email）
- パスワード強度インジケーター: 弱（赤）/中（黄）/強（緑）の3段階
- 利用規約リンクは /terms を別タブで開く
- **要確認**: パスワードの追加強度要件（大文字必須、記号必須など）
```
